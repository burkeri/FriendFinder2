<!DOCTYPE html>

<html>

<head>

    <!-- meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- title -->
    <title>Friend Finder - Survey</title>

    <!-- viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- css -->
    <!-- reset -->
    <link rel="stylesheet" type="text/css" href="reset.css" />
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- external stylesheet-->
    <link rel="stylesheet" type="text/css" media="screen" href="./style.css" />
</head>

<body>

    <div class="container">

        <div class="row">

            <!-- whitespace -->
            <div class="col-lg-2"></div>

            <!-- quiz -->
            <div class="col-lg-8">
                <div class="card">

                    <form action="POST">

                        <div class="form-group">
                            <label for="nameInput">Name</label>
                            <input id="nameInput"/>
                            <label for="imageInput">Image URL</label>
                            <input id="imageInput"/>
                        </div>

                        <!-- question 1-->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as extraverted, enthusiastic.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q1">
                                <option value="1">Strongly Disagree</option>
                                <option value="2">Disagree</option>
                                <option value="3">Neither Agree nor Disagree</option>
                                <option value="4">Agree</option>
                                <option value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 2-->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as critical, quarrelsome.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q2">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 3 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as dependable, self-disciplined.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q3">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 4 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as anxious, easily upset.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q4">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 5 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as open to new experiences, complex.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q5">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 6 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as reserved, quiet.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q6">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 7 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as sympathetic, warm.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q7">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 8 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as disorganized, careless.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q8">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 9 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as calm, emotionally stable.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q9">
                                <option name="choice" value=1>Strongly Disagree</option>
                                <option name="choice" value=2>Disagree</option>
                                <option name="choice" value=3>Neither Agree nor Disagree</option>
                                <option name="choice" value=4>Agree</option>
                                <option name="choice" value=5>Strongly Agree</option>
                            </select>
                        </div>

                        <!-- question 10 -->
                        <div class="form-group">
                            <!-- text -->
                            <h4 id="survey-question">I see myself as conventional, uncreative.</h4>
                            <!-- options -->
                            <select class="form-control form-control-sm" id="q10">
                                <option name="choice" value="1">Strongly Disagree</option>
                                <option name="choice" value="2">Disagree</option>
                                <option name="choice" value="3">Neither Agree nor Disagree</option>
                                <option name="choice" value="4">Agree</option>
                                <option name="choice" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <!-- submit -->
                        <button type="submit" class="btn btn-primary" id="submit">Submit</button>

                    </form>

                    <!-- modal -->
                    <div class="modal fade" id="best-match">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Your new friend!</h2>
                                <h3 id="best-match-name"></h3>  
                            </div>
                            <div class="modal-body">
                                <img id="best-match-pic" style="width: 20%">
                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <!-- whitespace -->
            <div class="col-lg-2"></div>

        </div>

    </div>
 <!-- jquery-->
 <script
 src="https://code.jquery.com/jquery-3.3.1.js"
 integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
 crossorigin="anonymous"></script>
    <!-- javascript -->
    <!-- <script src="apiRoutes.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- 

        - listener on submit
        - event prevent default
        - create object of user's input (hook into input field and each question using id)
        - make ajax call to api route and send it new object $.post("route", object, function(data))

        BEST MATCH
        - set up empty obj

    -->

    <script>
        $("#submit").on("click", function(e){
            e.preventDefault();

            // create newFreind obj from form
            var newFriend = {
                name: $("#nameInput").val(),
                photo: $("#imageInput").val(),
                answers: []
            };

            for (i=1; i<=10; i++) {
                var val = parseFloat($(`#q${i}`).val());
                newFriend.answers.push(val);
            }

            console.log("line 239 " + JSON.stringify(newFriend));

            $.post("/api/friends", newFriend, function(data){
                
                console.log("data: " + JSON.stringify(data));

                $("#best-match-name").text(data.name);
                $("#best-match-pic").attr("src", data.photo);

                $("#best-match").modal("toggle");

            });

        });
    </script>

</body>

</html>